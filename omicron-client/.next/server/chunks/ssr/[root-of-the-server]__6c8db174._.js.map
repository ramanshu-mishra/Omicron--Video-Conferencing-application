{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/raman/OneDrive/Desktop/Desktop/projects/omegle/omicron-client/interface.ts"],"sourcesContent":["\r\n\r\nexport enum MessageType{\r\n    SUCCESS= \"SUCCESS\",\r\n    FAILURE= \"FAILURE\",\r\n    OFFER = \"OFFER\",\r\n    ANSWER = \"ANSWER\",\r\n    MATCHED = \"MATCHED\"\r\n    \r\n}\r\nexport enum ErrorType{\r\nNON_JSON_FORMAT=\"NON_JSON_FORMAT\",\r\nINVALID_PAYLOAD=\"INVALID_PAYLOAD\",\r\nSENDER_UNIDENTIFIED = \"SENDER_UNIDENTIFIED\",\r\nRECIEVER_UNIDENTIFIED = \"RECIEVER_UNIDENTIFIED\",\r\nNO_USERS = \"NO_USERS\",\r\nNO_MATCH_FOUND = \"NO_MATCH_FOUND\"\r\n}\r\n\r\nexport enum RequestType{\r\n    SET_SENDER = \"SET_SENDER\",\r\n    SET_RECIEVER = \"SET_RECIEVER\",\r\n    OFFER = \"OFFER\",\r\n    ANSWER = \"ANSWER\",\r\n    ADD_ICE_CANDIDATES = \"ADD_ICE_CANDIDATES\",\r\n    FIND_NEXT = \"FIND_NEXT\",\r\n    STOP = \"STOP\"\r\n}\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;;AAEO,IAAA,AAAK,qCAAA;;;;;;WAAA;;AAQL,IAAA,AAAK,mCAAA;;;;;;;WAAA;;AASL,IAAA,AAAK,qCAAA;;;;;;;;WAAA","debugId":null}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/raman/OneDrive/Desktop/Desktop/projects/omegle/omicron-client/app/chat/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { MessageType, RequestType } from \"@/interface\";\r\n\r\nexport default function Page() {\r\n  const localRef = useRef<HTMLVideoElement | null>(null);\r\n  const remoteRef = useRef<HTMLVideoElement | null>(null);\r\n  const [pc, setPc] = useState<RTCPeerConnection | null>(null);\r\n  const [socket, setSocket] = useState<WebSocket | null>(null);\r\n\r\n  useEffect(() => {\r\n    const configuration = {\r\n      iceServers: [{ urls: \"stun:stun.l.google.com:19302\" }],\r\n    };\r\n\r\n    const peer = new RTCPeerConnection(configuration);\r\n    const ws = new WebSocket(\"ws://localhost:8080\");\r\n\r\n    setPc(peer);\r\n    setSocket(ws);\r\n\r\n    // ðŸ”¹ Attach local stream\r\n    getStream(peer);\r\n\r\n    // ðŸ”¹ Handle remote tracks\r\n    peer.ontrack = (event) => {\r\n      if (remoteRef.current) {\r\n        let stream = remoteRef.current.srcObject as MediaStream;\r\n        if (!stream) {\r\n          stream = new MediaStream();\r\n          remoteRef.current.srcObject = stream;\r\n        }\r\n        if (!stream.getTracks().find((t) => t.id === event.track.id)) {\r\n          stream.addTrack(event.track);\r\n        }\r\n      }\r\n    };\r\n\r\n    // ðŸ”¹ ICE candidates\r\n    peer.onicecandidate = (e) => {\r\n      if (e.candidate) {\r\n        ws.send(\r\n          JSON.stringify({\r\n            type: RequestType.ADD_ICE_CANDIDATES,\r\n            payload: { sdp: e.candidate },\r\n          })\r\n        );\r\n        console.log(\"Sent ICE\");\r\n      }\r\n    };\r\n\r\n    // ðŸ”¹ WebSocket listener\r\n    ws.onmessage = async (e) => {\r\n      const data = JSON.parse(e.data.toString());\r\n      const { type, payload } = data;\r\n\r\n      if (!type || !payload) return;\r\n\r\n      if (type === RequestType.OFFER) {\r\n        // Remote sent offer â†’ set remote desc + send answer\r\n        await peer.setRemoteDescription(new RTCSessionDescription(payload.offer));\r\n        const answer = await peer.createAnswer();\r\n        await peer.setLocalDescription(answer);\r\n\r\n        ws.send(\r\n          JSON.stringify({ type: RequestType.ANSWER, payload: { answer } })\r\n        );\r\n        console.log(\"Answer sent\");\r\n      } else if (type === RequestType.ANSWER) {\r\n        // Remote answered â†’ set remote desc\r\n        await peer.setRemoteDescription(new RTCSessionDescription(payload.answer));\r\n        console.log(\"Answer received\");\r\n      } else if (type === RequestType.ADD_ICE_CANDIDATES) {\r\n        const c = payload.sdp;\r\n        if (c) {\r\n          try {\r\n            await peer.addIceCandidate(new RTCIceCandidate(c));\r\n            console.log(\"ICE candidate added\");\r\n          } catch (err) {\r\n            console.warn(\"Error adding ICE\", err);\r\n          }\r\n        }\r\n      } else if (type === MessageType.MATCHED) {\r\n        console.log(\"Matched!\");\r\n        sendOffer(peer, ws);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  async function sendOffer(peer: RTCPeerConnection, ws: WebSocket) {\r\n    const offer = await peer.createOffer();\r\n    await peer.setLocalDescription(offer);\r\n    ws.send(JSON.stringify({ type: RequestType.OFFER, payload: { offer } }));\r\n    console.log(\"Offer sent\");\r\n  }\r\n\r\n  async function getStream(peer: RTCPeerConnection) {\r\n    const stream = await navigator.mediaDevices.getUserMedia({\r\n      video: true,\r\n      audio: true,\r\n    });\r\n    stream.getTracks().forEach((track) => peer.addTrack(track, stream));\r\n\r\n    if (localRef.current) {\r\n      localRef.current.srcObject = stream;\r\n      await localRef.current.play();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex justify-center items-center h-screen w-screen gap-4 bg-black\">\r\n      <div>\r\n        <video\r\n          ref={localRef}\r\n          autoPlay\r\n          muted\r\n          playsInline\r\n          className=\"w-80 h-60 bg-black\"\r\n        />\r\n        <p className=\"text-center mt-1 text-white\">Local</p>\r\n      </div>\r\n      <div>\r\n        <video\r\n          ref={remoteRef}\r\n          autoPlay\r\n          playsInline\r\n          className=\"w-80 h-60 bg-black\"\r\n        />\r\n        <p className=\"text-center mt-1 text-white\">Remote</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 234, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/raman/OneDrive/Desktop/Desktop/projects/omegle/omicron-client/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":";AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,MAAQ;;AAEzC,OAAO;IACL,IAAIF,QAAQC,GAAG,CAACK,uBAA2B,EAAF;;IAczC,OAAO;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;YAEP;QACF,OAAO;;QAMP;IACF;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 257, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/raman/OneDrive/Desktop/Desktop/projects/omegle/omicron-client/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored[\n  'react-ssr'\n].ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CACxD,YACD,CAACC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/raman/OneDrive/Desktop/Desktop/projects/omegle/omicron-client/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored['react-ssr'].React\n"],"names":["module","exports","require","vendored","React"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CAAC,YAAY,CAACC,KAAK","ignoreList":[0],"debugId":null}}]
}